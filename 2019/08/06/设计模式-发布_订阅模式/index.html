<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="设计模式-发布-订阅模式"/>




  <meta name="keywords" content="设计模式-发布-订阅模式," />




  <link rel="alternate" href="/atom.xml" title="Fynn's Blog" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1.2" />



<link rel="canonical" href="https://fynn90.github.io/2019/08/06/设计模式-发布_订阅模式/"/>


<meta name="description" content="发布-订阅模式.又称观察者模式(Observer).它定义了对象之间的一对一或一对多的依赖关系.当一个对象发生变化时,它会通知到依赖它的其他对象.  发布-订阅模式广泛用于异步编程者中,是一种代替传递回调函数的方案.前端最典型的例子就是:EventTarget.addEventListener()监听DOM事件. 发布-订阅模式可以取代对象之间的硬编码,让两个对象松耦合联系在一起. 发布订阅模式">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式-发布-订阅模式">
<meta property="og:url" content="https://fynn90.github.io/2019/08/06/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83_%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="Fynn&#39;s Blog">
<meta property="og:description" content="发布-订阅模式.又称观察者模式(Observer).它定义了对象之间的一对一或一对多的依赖关系.当一个对象发生变化时,它会通知到依赖它的其他对象.  发布-订阅模式广泛用于异步编程者中,是一种代替传递回调函数的方案.前端最典型的例子就是:EventTarget.addEventListener()监听DOM事件. 发布-订阅模式可以取代对象之间的硬编码,让两个对象松耦合联系在一起. 发布订阅模式">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-08-06T08:30:00.000Z">
<meta property="article:modified_time" content="2019-08-15T12:41:02.952Z">
<meta property="article:author" content="Fynn">
<meta property="article:tag" content="设计模式-发布-订阅模式">
<meta name="twitter:card" content="summary">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1.2" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: false,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?607980a031d3edcefed502ce80e77ffb";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-115728733-1', 'auto');
        ga('send', 'pageview');
  </script>



    <title> 设计模式-发布-订阅模式 · Fynn's Blog </title>
  <meta name="generator" content="Hexo 5.4.0"></head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Fynn's Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Fynn's Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          设计模式-发布-订阅模式
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2019年8月6日
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E5%90%AC%E6%A8%A1%E5%BC%8F"><span class="toc-text">简单的 自定义监听模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80-%E5%8F%91%E5%B8%83-%E8%AE%A2%E9%98%85%E5%AF%B9%E8%B1%A1"><span class="toc-text">全局 发布-订阅对象</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <blockquote>
<p>发布-订阅模式.又称观察者模式(Observer).它定义了对象之间的一对一或一对多的依赖关系.当一个对象发生变化时,它会通知到依赖它的其他对象.</p>
</blockquote>
<p>发布-订阅模式广泛用于异步编程者中,是一种代替传递回调函数的方案.前端最典型的例子就是:<code>EventTarget.addEventListener()</code>监听DOM事件.</p>
<p>发布-订阅模式可以取代对象之间的硬编码,让两个对象松耦合联系在一起.</p>
<p>发布订阅模式的缺陷:</p>
<ol>
<li>会消耗一定的时间和内存.</li>
<li>过度使用会将对象之间的联系深埋在背后,导致程序难以跟踪维护和理解.<span id="more"></span></li>
</ol>
<h2 id="简单的-自定义监听模式"><a href="#简单的-自定义监听模式" class="headerlink" title="简单的 自定义监听模式"></a>简单的 自定义监听模式</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义 事件监听对象</span></span><br><span class="line"><span class="keyword">const</span> event = &#123;</span><br><span class="line">  <span class="attr">clientList</span>: [],</span><br><span class="line">  <span class="comment">// 绑定 监听</span></span><br><span class="line">  listen (key, fn) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.clientList[key]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.clientList[key] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.clientList[key].push(fn); <span class="comment">// 订阅的消息添加缓存列表</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 触发 监听</span></span><br><span class="line">  trigger () &#123;</span><br><span class="line">  	<span class="keyword">var</span> key = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>); <span class="comment">// 删除参数数组中第一个值,它是监听方法名.</span></span><br><span class="line">    <span class="keyword">var</span> fns = <span class="built_in">this</span>.clientList[key];</span><br><span class="line">    <span class="keyword">if</span> (!fns || fns.length === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 如果没有找到绑定的方法</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>, fn; fn = fns[i++]) &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);  <span class="comment">// arguments 调用trigger方法时传入的参数(除了第一个参数外其他传入的实参)</span></span><br><span class="line">    &#125;</span><br><span class="line">	&#125;,</span><br><span class="line">  <span class="comment">// 移除 监听</span></span><br><span class="line">  <span class="function"><span class="title">remove</span>(<span class="params">key, fn</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> fns = <span class="built_in">this</span>.clientList[key];</span><br><span class="line">    <span class="keyword">if</span>(!fns) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 如果key对应的消息没有被人订阅,则消息直接返回 false</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(!fn) &#123;</span><br><span class="line">      fns&amp;&amp;(fns.length = <span class="number">0</span>) <span class="comment">// 如果没有传入具体的回调函数,则表示需要取消key对应消息的所有订阅</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> l = fns.length -<span class="number">1</span>; l &gt;= <span class="number">0</span>; l--) &#123; <span class="comment">// 反向遍历订阅的回调函数列表</span></span><br><span class="line">        <span class="keyword">var</span> _fn = fns[l];</span><br><span class="line">        <span class="keyword">if</span> (_fn === fn) &#123;</span><br><span class="line">          fns.splice(l, <span class="number">1</span>); <span class="comment">// 删除订阅者的回调函数</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创动态给对象增加 发布-订阅功能的方法</span></span><br><span class="line"><span class="keyword">const</span> installEvent = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">    obj[key] = event[key]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="全局-发布-订阅对象"><a href="#全局-发布-订阅对象" class="headerlink" title="全局 发布-订阅对象"></a>全局 发布-订阅对象</h2><p>全局的 发布-订阅对象需要考虑命名空间,在上面👆发布-订阅对象基础上,我们增加命名空间方法.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Event = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="built_in">global</span> = <span class="built_in">this</span>,</span><br><span class="line">      Event,</span><br><span class="line">      _default = <span class="string">&#x27;default&#x27;</span>;</span><br><span class="line">  Event = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _listen,</span><br><span class="line">        _trigger,</span><br><span class="line">        _remove,</span><br><span class="line">        _slice = <span class="built_in">Array</span>.prototype.slice,</span><br><span class="line">        _unshift = <span class="built_in">Array</span>.prototype.unshift,</span><br><span class="line">        nameSpaceCache = &#123;&#125;,</span><br><span class="line">        _create,</span><br><span class="line">        find,</span><br><span class="line">        each = <span class="function"><span class="keyword">function</span> (<span class="params">ary, fn</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> ret;</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>, l =ary.length; i &lt; l; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> n = ary[i];</span><br><span class="line">            ret = fn.call(n, i , n);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> ret;</span><br><span class="line">        &#125;;</span><br><span class="line">        _listen = <span class="function"><span class="keyword">function</span> (<span class="params">key, fn, cache</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span>(!cache[key]) &#123;</span><br><span class="line">            cache[key] = [];</span><br><span class="line">          &#125;</span><br><span class="line">          cache[key].push(fn);</span><br><span class="line">        &#125;;</span><br><span class="line">    		_remove = <span class="function"><span class="keyword">function</span> (<span class="params">key, cache, fn</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span>(cache[key]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fn) &#123;</span><br><span class="line">              <span class="keyword">for</span>(<span class="keyword">let</span> i = cache[key].length; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="keyword">if</span>(cache[key][i] === fn) cache[key].splice(i, <span class="number">1</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              cache[key] = []</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        _trigger = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> cache = _shift.call(<span class="built_in">arguments</span>),</span><br><span class="line">              key = _shift.call(<span class="built_in">arguments</span>),</span><br><span class="line">              args = <span class="built_in">arguments</span>,</span><br><span class="line">              _self = <span class="built_in">this</span>,</span><br><span class="line">              ret,</span><br><span class="line">              stack = cache[key];</span><br><span class="line">          	<span class="keyword">if</span> (!stack || !stack.length) <span class="keyword">return</span>;</span><br><span class="line">          	<span class="keyword">return</span> each(stack, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="built_in">this</span>.apply(_self, args);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;;</span><br><span class="line">    		_create = <span class="function"><span class="keyword">function</span> (<span class="params">nameSpace</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">let</span> nameSpace = nameSpace || _default;</span><br><span class="line">          <span class="keyword">var</span> cache = &#123;&#125;,</span><br><span class="line">              offlineStack = [], <span class="comment">// 离线事件</span></span><br><span class="line">              ret = &#123;</span><br><span class="line">                listen (key, fn, last) &#123;</span><br><span class="line">                  _listen(key, fn, cache);</span><br><span class="line">                  <span class="keyword">if</span> (offlineStack === <span class="literal">null</span>) <span class="keyword">return</span></span><br><span class="line">                  <span class="keyword">if</span> (last === <span class="string">&#x27;last&#x27;</span>)&#123;</span><br><span class="line">                    offlineStack.length &amp;&amp; offlineStack.pop()();</span><br><span class="line">                  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    each(offlineStack, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">this</span>()&#125;);</span><br><span class="line">                  &#125;</span><br><span class="line">                  offlineStack = <span class="literal">null</span>;</span><br><span class="line">                &#125;,</span><br><span class="line">                one (key, fn, last) &#123;</span><br><span class="line">                  _remove(key,cache);</span><br><span class="line">                  <span class="built_in">this</span>.listen(key, fn, last)</span><br><span class="line">                &#125;,</span><br><span class="line">                remove (key, fn) &#123;</span><br><span class="line">                  _remove(key, cache, fn);</span><br><span class="line">                &#125;,</span><br><span class="line">                trigger () &#123;</span><br><span class="line">                  <span class="keyword">var</span> fn,</span><br><span class="line">                      args,</span><br><span class="line">                      _self = <span class="built_in">this</span>;</span><br><span class="line">                  _unshift.call(<span class="built_in">arguments</span>, cache);</span><br><span class="line">                  args = <span class="built_in">arguments</span>;</span><br><span class="line">                  fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> _trigger.apply(_self, args);</span><br><span class="line">                  &#125;;</span><br><span class="line">                  <span class="keyword">if</span>(offlineStack) &#123;</span><br><span class="line">                    <span class="keyword">return</span> offlineStack.push(fn);</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="keyword">return</span> fn();</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;;</span><br><span class="line">          </span><br><span class="line">          		<span class="keyword">return</span> nameSpace?(nameSpaceCache[nameSpace]?nameSpaceCache[nameSpace]:nameSpaceCache[nameSpace] = ret):ret;</span><br><span class="line">          </span><br><span class="line">        &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">create</span>: _create,</span><br><span class="line">      <span class="function"><span class="title">one</span>(<span class="params">key, fn, last</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> event = <span class="built_in">this</span>.create();</span><br><span class="line">        event.one(key, fn, last);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">remove</span>(<span class="params">key, fn</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> event = <span class="built_in">this</span>.create();</span><br><span class="line">        event.remove(key, fn)</span><br><span class="line">      &#125;,</span><br><span class="line">      listen (key, fn, last) &#123;</span><br><span class="line">        <span class="keyword">var</span> event = <span class="built_in">this</span>.create();</span><br><span class="line">        event.listen(key, fn, last);</span><br><span class="line">      &#125;,</span><br><span class="line">      trigger () &#123;</span><br><span class="line">        <span class="keyword">var</span> event = <span class="built_in">this</span>.create();</span><br><span class="line">        event.trigger.apply(<span class="built_in">this</span>,<span class="built_in">arguments</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;();</span><br><span class="line">  <span class="keyword">return</span> Event;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">Event.listen(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">&#125;)</span><br><span class="line">Event.trigger(<span class="string">&#x27;click&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">Event.create(<span class="string">&#x27;nameSpace1&#x27;</span>).listen(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;)</span><br><span class="line">Event.create(<span class="string">&#x27;nameSpace1&#x27;</span>).trigger(<span class="string">&#x27;click&#x27;</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>




      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>Fynn</span>
    </p>
    <p class="copyright-item">
      <span>来源: </span>
      <a href="https://fynn90.github.io">https://fynn90.github.io</a>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="https://fynn90.github.io/2019/08/06/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83_%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F/">https://fynn90.github.io/2019/08/06/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83_%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden />
    <label class="reward-button" for="reward">赞赏支持</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/wechat.png" title="wechat">
          <div>wechat</div>
        </label>
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/alipay.png" title="alipay">
          <div>alipay</div>
        </label>
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83-%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F/">设计模式-发布-订阅模式</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2019/08/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">设计模式-命令模式</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2019/08/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/">
        <span class="next-text nav-default">设计模式-代理模式</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:iamfatefan@outlook.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
        
          <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/%E5%B8%86-%E9%82%93-17163589/" class="iconfont icon-linkedin" title="linkedin"></a>
        
      
    
      
        
          <a target="_blank" rel="noopener" href="https://plus.google.com/u/0/117459332873536225443" class="iconfont icon-google" title="google"></a>
        
      
    
      
        
          <a target="_blank" rel="noopener" href="https://github.com/fatefan" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a target="_blank" rel="noopener" href="http://www.weibo.com/306019091" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
        
          <a target="_blank" rel="noopener" href="https://www.zhihu.com/people/FynnDeng/activities" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
      
    
    
    
  </div>


<div class="copyright">
  
  <span class="copyright-year">
    
    &copy; 
     
      2017 - 
    
    2021

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Fynn</span>
  </span>
  
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=1.1.2"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1.2"></script>

    
  </body>
</html>
