<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="RxJS"/>




  <meta name="keywords" content="RxJS," />




  <link rel="alternate" href="/atom.xml" title="Fynn's Blog" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1.2" />



<link rel="canonical" href="https://fynn90.github.io/2021/03/03/RxJS/"/>


<meta name="description" content="RxJS æ˜¯ Javascript ä¸–ç•Œä¸­å®ç°å“åº”å¼ç¼–ç¨‹å·¥å…·åº“ï¼Œå®ƒä½¿å¾—åœ¨ JS ä¸­å¤„ç†å¤æ‚çš„æ•°æ®æµå˜å¾—ç®€å•å’Œæ˜“äºç»´æŠ¤ã€‚  å“åº”å¼ç¼–ç¨‹æˆ–ååº”å¼ç¼–ç¨‹ï¼ˆè‹±è¯­ï¼šReactive programmingï¼‰æ˜¯ä¸€ç§é¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„å£°æ˜å¼ç¼–ç¨‹èŒƒå¼ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ç¼–ç¨‹è¯­è¨€ä¸­å¾ˆæ–¹ä¾¿åœ°è¡¨è¾¾é™æ€æˆ–åŠ¨æ€çš„æ•°æ®æµï¼Œè€Œç›¸å…³çš„è®¡ç®—æ¨¡å‹ä¼šè‡ªåŠ¨å°†å˜åŒ–çš„å€¼é€šè¿‡æ•°æ®æµè¿›è¡Œä¼ æ’­ã€‚ - wikipedia">
<meta property="og:type" content="article">
<meta property="og:title" content="RxJS">
<meta property="og:url" content="https://fynn90.github.io/2021/03/03/RxJS/index.html">
<meta property="og:site_name" content="Fynn&#39;s Blog">
<meta property="og:description" content="RxJS æ˜¯ Javascript ä¸–ç•Œä¸­å®ç°å“åº”å¼ç¼–ç¨‹å·¥å…·åº“ï¼Œå®ƒä½¿å¾—åœ¨ JS ä¸­å¤„ç†å¤æ‚çš„æ•°æ®æµå˜å¾—ç®€å•å’Œæ˜“äºç»´æŠ¤ã€‚  å“åº”å¼ç¼–ç¨‹æˆ–ååº”å¼ç¼–ç¨‹ï¼ˆè‹±è¯­ï¼šReactive programmingï¼‰æ˜¯ä¸€ç§é¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„å£°æ˜å¼ç¼–ç¨‹èŒƒå¼ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ç¼–ç¨‹è¯­è¨€ä¸­å¾ˆæ–¹ä¾¿åœ°è¡¨è¾¾é™æ€æˆ–åŠ¨æ€çš„æ•°æ®æµï¼Œè€Œç›¸å…³çš„è®¡ç®—æ¨¡å‹ä¼šè‡ªåŠ¨å°†å˜åŒ–çš„å€¼é€šè¿‡æ•°æ®æµè¿›è¡Œä¼ æ’­ã€‚ - wikipedia">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img.imgdb.cn/item/6030f4e25f4313ce259e4f45.png">
<meta property="article:published_time" content="2021-03-03T07:31:00.000Z">
<meta property="article:modified_time" content="2021-03-03T07:09:26.426Z">
<meta property="article:author" content="Fynn">
<meta property="article:tag" content="RxJS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.imgdb.cn/item/6030f4e25f4313ce259e4f45.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1.2" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: false,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?607980a031d3edcefed502ce80e77ffb";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-115728733-1', 'auto');
        ga('send', 'pageview');
  </script>



    <title> RxJS Â· Fynn's Blog </title>
  <meta name="generator" content="Hexo 5.4.0"></head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Fynn's Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Fynn's Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              é¦–é¡µ
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              å½’æ¡£
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              æ ‡ç­¾
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          RxJS
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2021å¹´3æœˆ3æ—¥
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#RxJS-%E4%BE%8B%E5%AD%90-%F0%9F%8C%B0"><span class="toc-text">RxJS ä¾‹å­ ğŸŒ°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85-Observable-amp-subscribe"><span class="toc-text">å‘å¸ƒè®¢é˜… Observable &amp; subscribe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E5%A4%84%E7%90%86-operators"><span class="toc-text">æ•°æ®æµçš„å¤„ç† operators</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subject-%E7%9B%91%E5%90%AC%E5%A4%9A%E8%B7%AF%E4%BA%8B%E4%BB%B6%E5%92%8C%E5%8F%91%E5%B8%83"><span class="toc-text">Subject ç›‘å¬å¤šè·¯äº‹ä»¶å’Œå‘å¸ƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RxJS-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">RxJS æ ¸å¿ƒæ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Observable"><span class="toc-text">Observable</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Observable-%E5%9B%9B%E4%B8%AA%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">Observable å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Observer"><span class="toc-text">Observer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#operators"><span class="toc-text">operators</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Piping"><span class="toc-text">Piping</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Creation-Operators"><span class="toc-text">Creation Operators</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%88%86%E7%B1%BB"><span class="toc-text">æ“ä½œç¬¦åˆ†ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">åˆ›å»ºæ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%88%9B%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">è¿æ¥åˆ›å»ºæ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">è½¬æ¢æ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">è¿‡æ»¤æ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">è¿æ¥æ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E5%B9%BF%E6%92%AD%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">å¤šå¹¿æ’­æ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E6%8D%95%E8%8E%B7%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">é”™è¯¯æ•è·æ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">å·¥å…·æ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%92%8C%E5%B8%83%E5%B0%94%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">æ¡ä»¶å’Œå¸ƒå°”æ“ä½œç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E5%92%8C%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">æ•°å­¦å’Œèšåˆæ“ä½œç¬¦</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-%F0%9F%8C%B0"><span class="toc-text">ä¾‹å­ ğŸŒ°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subscription"><span class="toc-text">Subscription</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subject"><span class="toc-text">Subject</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E6%92%AD%E5%92%8C%E5%A4%9A%E6%92%AD"><span class="toc-text">å•æ’­å’Œå¤šæ’­</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BehaviorSubject"><span class="toc-text">BehaviorSubject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ReplaySubject"><span class="toc-text">ReplaySubject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AsyncSubject"><span class="toc-text">AsyncSubject</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scheduler%EF%BC%88%E8%B0%83%E5%BA%A6%E5%99%A8%EF%BC%89"><span class="toc-text">Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Schedulers-%E8%B0%83%E5%BA%A6%E5%99%A8-%E7%B1%BB%E5%9E%8B"><span class="toc-text">Schedulers(è°ƒåº¦å™¨) ç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Schedulers-%E8%B0%83%E5%BA%A6%E5%99%A8"><span class="toc-text">ä½¿ç”¨ Schedulers(è°ƒåº¦å™¨)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RxJS-%E4%B8%9A%E5%8A%A1%E4%B8%8A%E7%9A%84%E5%AE%9E%E8%B7%B5"><span class="toc-text">RxJS ä¸šåŠ¡ä¸Šçš„å®è·µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%85%83%E7%B4%A0%E6%8B%96%E6%8B%BD"><span class="toc-text">é¡µé¢å…ƒç´ æ‹–æ‹½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Refer-To"><span class="toc-text">Refer To</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p><img src="https://img.imgdb.cn/item/6030f4e25f4313ce259e4f45.png"></p>
<p><a target="_blank" rel="noopener" href="https://rxjs.dev/guide/overview">RxJS</a> æ˜¯ Javascript ä¸–ç•Œä¸­å®ç°å“åº”å¼ç¼–ç¨‹å·¥å…·åº“ï¼Œå®ƒä½¿å¾—åœ¨ JS ä¸­å¤„ç†å¤æ‚çš„æ•°æ®æµå˜å¾—ç®€å•å’Œæ˜“äºç»´æŠ¤ã€‚</p>
<blockquote>
<p><strong>å“åº”å¼ç¼–ç¨‹</strong>æˆ–<strong>ååº”å¼ç¼–ç¨‹</strong>ï¼ˆè‹±è¯­ï¼šReactive programmingï¼‰æ˜¯ä¸€ç§é¢å‘æ•°æ®<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%B8%B2%E6%B5%81">æµ</a>å’Œå˜åŒ–ä¼ æ’­çš„<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%BC%96%E7%A8%8B">å£°æ˜å¼</a><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F">ç¼–ç¨‹èŒƒå¼</a>ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ç¼–ç¨‹è¯­è¨€ä¸­å¾ˆæ–¹ä¾¿åœ°è¡¨è¾¾é™æ€æˆ–åŠ¨æ€çš„æ•°æ®æµï¼Œè€Œç›¸å…³çš„è®¡ç®—æ¨¡å‹ä¼šè‡ªåŠ¨å°†å˜åŒ–çš„å€¼é€šè¿‡æ•°æ®æµè¿›è¡Œä¼ æ’­ã€‚ - <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B">wikipedia</a></p>
</blockquote>
<span id="more"></span>

<h2 id="RxJS-ä¾‹å­-ğŸŒ°"><a href="#RxJS-ä¾‹å­-ğŸŒ°" class="headerlink" title="RxJS ä¾‹å­ ğŸŒ°"></a>RxJS ä¾‹å­ ğŸŒ°</h2><h3 id="å‘å¸ƒè®¢é˜…-Observable-amp-subscribe"><a href="#å‘å¸ƒè®¢é˜…-Observable-amp-subscribe" class="headerlink" title="å‘å¸ƒè®¢é˜… Observable &amp; subscribe"></a>å‘å¸ƒè®¢é˜… <strong>Observable</strong> &amp; <strong>subscribe</strong></h3><p>RxJS æœ€æ ¸å¿ƒçš„èƒ½åŠ›å°±æ˜¯ è½¯ä»¶è®¾è®¡ä¸­çš„ <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-cn/%E5%8F%91%E5%B8%83/%E8%AE%A2%E9%98%85">å‘å¸ƒ/è®¢é˜…æ¨¡å¼</a>. å®ƒé€šè¿‡ <code>Observable</code>å’Œ<code>subscribe</code>å®ç°</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="comment">// è®°å½•æ—¶é—´</span></span><br><span class="line"><span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæµ</span></span><br><span class="line"><span class="keyword">const</span> stream$ = <span class="keyword">new</span> Observable(<span class="function">(<span class="params">subscriber</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscriber.next([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// å‘å¸ƒ</span></span><br><span class="line">  &#125;, <span class="number">500</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscriber.next(&#123; <span class="attr">a</span>: <span class="number">1000</span> &#125;); <span class="comment">// å‘å¸ƒ</span></span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscriber.next(<span class="string">&#x27;end&#x27;</span>); <span class="comment">// å‘å¸ƒ</span></span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscriber.complete(); <span class="comment">// å®Œæˆ</span></span><br><span class="line">  &#125;, <span class="number">4000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨æµã€‚ è®¢é˜…</span></span><br><span class="line"><span class="keyword">const</span> subscription1 = stream$.subscribe(&#123;</span><br><span class="line">  <span class="attr">complete</span>: <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;done&#x27;</span>),</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - now, <span class="string">&#x27;ms stream1&#x27;</span>, v),</span><br><span class="line">  <span class="attr">error</span>: <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;error&#x27;</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  å»¶æ—¶1såï¼Œå¯åŠ¨æµ</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> subscription2 = stream$.subscribe(&#123;</span><br><span class="line">    <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - now, <span class="string">&#x27;ms stream2&#x27;</span>, v),</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p><strong>ç»“æœï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">502 ms stream1 [ 1, 2, 3 ]</span><br><span class="line">1008 ms stream1 &#123; a: 1000 &#125;</span><br><span class="line">1512 ms stream2 [ 1, 2, 3 ]</span><br><span class="line">2013 ms stream2 &#123; a: 1000 &#125;</span><br><span class="line">3006 ms stream1 end</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">4010 ms stream2 end</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®æµçš„å¤„ç†-operators"><a href="#æ•°æ®æµçš„å¤„ç†-operators" class="headerlink" title="æ•°æ®æµçš„å¤„ç† operators"></a>æ•°æ®æµçš„å¤„ç† <strong>operators</strong></h3><p>RxJS æä¾›å„ç§æ“ä½œç¬¦(operators)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>RxJS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>æŒ‰ é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/rxjs/6.6.3/rxjs.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> &#123; fromEvent &#125; = <span class="built_in">window</span>.rxjs;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> &#123; throttleTime, scan &#125; = <span class="built_in">window</span>.rxjs.operators;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="comment">// fromEvent åˆ›å»ºä¸€ä¸ª Observable</span></span></span><br><span class="line"><span class="javascript">      fromEvent(btn, <span class="string">&#x27;click&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        .pipe(</span></span><br><span class="line"><span class="javascript">          throttleTime(<span class="number">1000</span>), <span class="comment">// é˜²æŠ–1ç§’é’Ÿ</span></span></span><br><span class="line"><span class="javascript">          scan(<span class="function">(<span class="params">count</span>) =&gt;</span> count + <span class="number">1</span>, <span class="number">0</span>) <span class="comment">// ç´¯ç§¯è®¡ç®—</span></span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">        .subscribe(<span class="function">(<span class="params">count</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`click <span class="subst">$&#123;count&#125;</span> times`</span>)); <span class="comment">//è®¢é˜…å¹¶ä¸”å°†å¤„ç†åçš„æ•°æ®ä¼ é€’ç»™ subscribe</span></span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Subject-ç›‘å¬å¤šè·¯äº‹ä»¶å’Œå‘å¸ƒ"><a href="#Subject-ç›‘å¬å¤šè·¯äº‹ä»¶å’Œå‘å¸ƒ" class="headerlink" title="Subject ç›‘å¬å¤šè·¯äº‹ä»¶å’Œå‘å¸ƒ"></a>Subject ç›‘å¬å¤šè·¯äº‹ä»¶å’Œå‘å¸ƒ</h3><p><code>Subject</code>ç±»ä¼¼äº <code>EventEmitter</code>å¯ä»¥å°†ç›‘å¬å¤šä¸ªäº‹ä»¶å’Œå¹¿æ’­äº‹ä»¶è§¦å‘ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Subject &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºsubject</span></span><br><span class="line"><span class="keyword">const</span> subject = <span class="keyword">new</span> Subject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…ä¸€ä¸ªobserver</span></span><br><span class="line">subject.subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;stream 1&#x27;</span>, v));</span><br><span class="line"><span class="comment">// å†è®¢é˜…ä¸€ä¸ªobserver</span></span><br><span class="line">subject.subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;stream 2&#x27;</span>, v));</span><br><span class="line"><span class="comment">// å»¶æ—¶1så†è®¢é˜…ä¸€ä¸ªobserver</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subject.subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;stream 3&#x27;</span>, v));</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="comment">// äº§ç”Ÿæ•°æ®1</span></span><br><span class="line">subject.next(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// äº§ç”Ÿæ•°æ®2</span></span><br><span class="line">subject.next(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// å»¶æ—¶3säº§ç”Ÿæ•°æ®3</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subject.next(<span class="number">3</span>);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="RxJS-æ ¸å¿ƒæ¦‚å¿µ"><a href="#RxJS-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="RxJS æ ¸å¿ƒæ¦‚å¿µ"></a>RxJS æ ¸å¿ƒæ¦‚å¿µ</h2><p>RxJS ç»“åˆäº† è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€ä½¿ç”¨é›†åˆçš„å‡½æ•°ç¼–ç¨‹ï¼Œä»¥æ»¡è¶³ä¸€ç§ç†æƒ³æ–¹å¼æ¥æŒ‚å†äº‹ä»¶åºåˆ—æ‰€éœ€è¦çš„ä¸€åˆ‡ã€‚</p>
<p>RxJS è§£å†³å¼‚æ­¥äº‹ä»¶ç®¡ç†çš„åŸºæœ¬æ¦‚å¿µï¼š</p>
<ul>
<li><strong>Observable (å¯è§‚å¯Ÿå¯¹è±¡):</strong> è¡¨ç¤ºä¸€ä¸ªæ¦‚å¿µï¼Œè¿™ä¸ªæ¦‚å¿µæ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„æœªæ¥å€¼æˆ–äº‹ä»¶çš„é›†åˆã€‚</li>
<li><strong>Observer (è§‚å¯Ÿè€…):</strong> ä¸€ä¸ªå›è°ƒå‡½æ•°çš„é›†åˆï¼Œå®ƒçŸ¥é“å¦‚ä½•å»ç›‘å¬ç”± Observable æä¾›çš„å€¼ã€‚</li>
<li><strong>Subscription (è®¢é˜…):</strong> è¡¨ç¤º Observable çš„æ‰§è¡Œï¼Œä¸»è¦ç”¨äºå–æ¶ˆ Observable çš„æ‰§è¡Œã€‚</li>
<li><strong>Operators (æ“ä½œç¬¦):</strong> é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼çš„çº¯å‡½æ•° (pure function)ï¼Œä½¿ç”¨åƒ <code>map</code>ã€<code>filter</code>ã€<code>concat</code>ã€<code>flatMap</code> ç­‰è¿™æ ·çš„æ“ä½œç¬¦æ¥å¤„ç†é›†åˆã€‚</li>
<li><strong>Subject (ä¸»ä½“):</strong> ç›¸å½“äº EventEmitterï¼Œå¹¶ä¸”æ˜¯å°†å€¼æˆ–äº‹ä»¶å¤šè·¯æ¨é€ç»™å¤šä¸ª Observer çš„å”¯ä¸€æ–¹å¼ã€‚</li>
<li><strong>Schedulers (è°ƒåº¦å™¨):</strong> ç”¨æ¥æ§åˆ¶å¹¶å‘å¹¶ä¸”æ˜¯ä¸­å¤®é›†æƒçš„è°ƒåº¦å‘˜ï¼Œå…è®¸æˆ‘ä»¬åœ¨å‘ç”Ÿè®¡ç®—æ—¶è¿›è¡Œåè°ƒï¼Œä¾‹å¦‚ <code>setTimeout</code> æˆ– <code>requestAnimationFrame</code> æˆ–å…¶ä»–ã€‚</li>
</ul>
<h3 id="Observable"><a href="#Observable" class="headerlink" title="Observable"></a><a target="_blank" rel="noopener" href="https://rxjs.dev/guide/observable">Observable</a></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable = <span class="keyword">new</span> Observable(<span class="function">(<span class="params">subscriber</span>) =&gt;</span> &#123;</span><br><span class="line">  subscriber.next(<span class="number">1</span>);</span><br><span class="line">  subscriber.next(<span class="number">2</span>);</span><br><span class="line">  subscriber.next(<span class="number">3</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscriber.next(<span class="number">4</span>);</span><br><span class="line">    subscriber.complete();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>Observable</code> å¯ä»¥æ¥å—ä¸€ä¸ª <code>Function</code>ç”¨æ¥å‘å¸ƒæ•°æ®ã€‚å®ä¾‹åŒ–<code>Observable</code>å¯ä»¥è·å¾—<code>observable</code>.å®ƒå¯ä»¥ç”¨æ¥è®¢é˜…<code>observable</code>ï¼Œç”¨æ¥å¤„ç†<code>Observable</code>å‘å¸ƒçš„æ•°æ®ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable = <span class="keyword">new</span> Observable(<span class="function">(<span class="params">subscriber</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Hello&#x27;</span>);</span><br><span class="line">  subscriber.next(<span class="number">42</span>);</span><br><span class="line">  subscriber.next(<span class="number">100</span>);</span><br><span class="line">  subscriber.next(<span class="number">200</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscriber.next(<span class="number">300</span>); <span class="comment">// happens asynchronously</span></span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;before&#x27;</span>);</span><br><span class="line">observable.subscribe(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;after&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¾“å‡º</span></span><br><span class="line"><span class="comment">&quot;before&quot;</span></span><br><span class="line"><span class="comment">&quot;Hello&quot;</span></span><br><span class="line"><span class="comment">42</span></span><br><span class="line"><span class="comment">100</span></span><br><span class="line"><span class="comment">200</span></span><br><span class="line"><span class="comment">&quot;after&quot;</span></span><br><span class="line"><span class="comment">300</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p><code>observable.subscribe</code>çš„è°ƒç”¨å¯ä»¥è·å–åˆ° <code>Observable</code>ä¸­æ¨åŠ¨çš„æ•°æ®åŠæ—¶å®ƒæ˜¯å¼‚æ­¥çš„ã€‚</p>
<h4 id="Observable-å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ"><a href="#Observable-å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="Observable å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ"></a>Observable å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ</h4><ul>
<li>åˆ›å»º Observables - <code>const observable = new Observable(subscriber =&gt; &#123;...&#125;);</code></li>
<li>è®¢é˜… Observables - <code>observable.subscribe(...)</code></li>
<li>æ‰§è¡Œ Observables - <code>new Observable(function subscribe(subscriber) &#123;...&#125;)</code> ä¸­ <code>subscriber</code>æ”¯æŒ<code>next\error\complete</code>ä¸‰ç§ç±»å‹æ‰§è¡Œæ–¹å¼</li>
<li>æ¸…ç† Observables - <code>observable.subscribe(...)</code> æ‰§è¡Œåè·å–ä¸€ä¸ª<code>Subscription</code>,å¯ä»¥ç”¨å®ƒæ¸…ç†æ‰<code>Observable</code> <code>subscription.unsubscribe()</code></li>
</ul>
<p>é™¤äº†ç”¨<code>new Observable</code>å¯ä»¥åˆ›å»º<code>observable</code>ä¹‹å¤–ï¼ŒRxjs ä¹Ÿæä¾›äº†å…¶å®ƒåˆ›å»º<code>observable</code>çš„æ–¹å¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">from</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable = <span class="keyword">from</span>([<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]);</span><br><span class="line"><span class="keyword">const</span> subscription = observable.subscribe(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="built_in">console</span>.log(x));</span><br><span class="line"><span class="comment">// Later:</span></span><br><span class="line">subscription.unsubscribe();</span><br></pre></td></tr></table></figure>

<h3 id="Observer"><a href="#Observer" class="headerlink" title="Observer"></a><a target="_blank" rel="noopener" href="https://rxjs.dev/guide/observer">Observer</a></h3><p><code>Observer</code>æ˜¯<code>Observable</code>å‘é€å€¼çš„æ¶ˆè´¹æ–¹ã€‚<code>Observer</code>æœ‰ä¸‰ç§å½¢å¼ï¼šä¸€ä¸ªå‡½æ•°ï¼Œä¸€ä¸ª<code>&#123;next:Function,error:Function,complete:Function&#125;</code>çš„å¯¹è±¡ï¼Œä¼ é€’ä¸‰ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå‚æ•°é¡ºåºæ˜¯ï¼š<code>nextã€errorã€complete</code>ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª æµ</span></span><br><span class="line"><span class="keyword">const</span> Stream$ = <span class="keyword">new</span> Observable(<span class="function">(<span class="params">subscribe</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// subscribeé™¤äº† nextæ–¹æ³•å¯ä»¥è°ƒç”¨ï¼Œä¹Ÿè¿˜å¯ä»¥è°ƒç”¨ complete,erroræ–¹æ³•ã€‚</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    subscribe.next([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">  &#125;);</span><br><span class="line">  subscribe.next(&#123; <span class="attr">a</span>: <span class="number">100</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obsever1 = &#123;</span><br><span class="line">  <span class="attr">complete</span>: <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;obsever1 - done&#x27;</span>),</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;obsever1&#x27;</span>, v),</span><br><span class="line">  <span class="attr">error</span>: <span class="function">() =&gt;</span> <span class="built_in">console</span>.error(<span class="string">&#x27;obsever1&#x27;</span>, <span class="string">&#x27;error&#x27;</span>),</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨æµ</span></span><br><span class="line"><span class="keyword">const</span> Subscription1 = Stream$.subscribe(obsever);</span><br><span class="line"><span class="keyword">const</span> Subscription2 = Stream$.subscribe(<span class="function"><span class="keyword">function</span> <span class="title">observer2</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;obsever2&#x27;</span>, v);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Subscription2 = Stream$.subscribe(</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">observer3_next</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;obsever2&#x27;</span>, v);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">observer3_error</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;obsever2&#x27;</span>, v);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">observer3_complete</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;obsever3 - done&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><code>next\error\complete</code>å¹¶ä¸éœ€è¦å…¨éƒ¨å®šä¹‰ï¼Œå¯ä»¥å®šä¹‰ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="operators"><a href="#operators" class="headerlink" title="operators"></a><a target="_blank" rel="noopener" href="https://rxjs.dev/guide/operators">operators</a></h3><p>å°½ç®¡ RxJS çš„æ ¹åŸºæ˜¯ Observableï¼Œä½†æœ€æœ‰ç”¨çš„è¿˜æ˜¯å®ƒçš„<strong>æ“ä½œç¬¦</strong>ã€‚æ“ä½œç¬¦æ˜¯å…è®¸å¤æ‚çš„å¼‚æ­¥ä»£ç ä»¥å£°æ˜å¼çš„æ–¹å¼è¿›è¡Œè½»æ¾ç»„åˆçš„åŸºç¡€ä»£ç å•å…ƒã€‚</p>
<p>operators æ“ä½œç¬¦å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæœ‰ä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li><p><strong>Pipeable Operators</strong> ï¼ˆç®¡é“æ“ä½œç¬¦ï¼‰ï¼š <code>observable</code>å®ä¾‹å¯ä»¥ä½¿ç”¨è¿™æ ·çš„è¯­æ³•:<code>observableInstance.pipe(operator())</code> ä¼ é€’ä¸€ä¸ª<code>Observable</code>å¹¶è¿”å›ä¸€ä¸ªæ–°çš„<code>Observable</code>ã€‚</p>
<p>æ“ä½œç¬¦æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçº¯å‡½æ•° (pure function)ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª Observable ä½œä¸ºè¾“å…¥ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ Observable ä½œä¸ºè¾“å‡ºã€‚è®¢é˜…è¾“å‡º Observable åŒæ ·ä¼šè®¢é˜…è¾“å…¥ Observable ã€‚</p>
</li>
<li><p><strong>Creation Operators</strong> ï¼ˆåˆ›é€ æ“ä½œç¬¦ï¼‰ï¼šå¯ä»¥ç§°ä¸ºç‹¬ç«‹å‡½æ•°æ¥åˆ›å»ºæ–°çš„ Observableã€‚</p>
</li>
</ul>
<h4 id="Piping"><a href="#Piping" class="headerlink" title="Piping"></a>Piping</h4><p>Pipeable Operators æ˜¯æ— å®³çš„çº¯å‡½æ•°ï¼Œå€ŸåŠ©<code>pipe()</code>å¯ä»¥å®ç°ï¼Œå¤šä¸ªç®¡é“æ“ä½œç¬¦ä¸²è¡Œå¤„ç†ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obs.pipe(op1(), op2(), op3(), op3());</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥é€šè¿‡<code>op()(obs)</code>ä½¿ç”¨ç®¡é“è¿ç®—ç¬¦ï¼Œä½†å¹¶ä¸æ¨èè¿™æ ·ä½¿ç”¨ï¼Œå› ä¸ºå¯è¯»æ€§ä¸å¥½ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">of</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; map &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs/operators&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// op()(obs) æ¨¡å¼</span></span><br><span class="line"><span class="comment">// mapæ˜¯ç®¡é“æ“ä½œç¬¦ã€‚ ofè¿”å›ä¸€ä¸ª observable</span></span><br><span class="line">map(<span class="function">(<span class="params">x: <span class="built_in">number</span></span>) =&gt;</span> x * x)(<span class="keyword">of</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)).subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`value1: <span class="subst">$&#123;v&#125;</span>`</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// obs.pipe( op1(),op2(),op3(),op3()) æ¨¡å¼</span></span><br><span class="line"><span class="keyword">of</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">  .pipe(map(<span class="function">(<span class="params">v</span>) =&gt;</span> v + v))</span><br><span class="line">  .subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`value2: <span class="subst">$&#123;v&#125;</span>`</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">/** è¾“å‡º</span></span><br><span class="line"><span class="comment">value1: 1</span></span><br><span class="line"><span class="comment">value1: 4</span></span><br><span class="line"><span class="comment">value1: 9</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">value2: 2</span></span><br><span class="line"><span class="comment">value2: 4</span></span><br><span class="line"><span class="comment">value2: 6</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="Creation-Operators"><a href="#Creation-Operators" class="headerlink" title="Creation Operators"></a>Creation Operators</h4><p>ä»€ä¹ˆæ˜¯åˆ›ä½œè¿ç®—ç¬¦ï¼Ÿä¸ç®¡é“è¿ç®—ç¬¦ä¸åŒï¼Œåˆ›å»ºè¿ç®—ç¬¦æ˜¯å¯ç”¨äºåˆ›å»º<code>Observable</code>å¯¹è±¡çš„å‡½æ•°.å…·æœ‰ä¸€äº›å¸¸è§çš„é¢„å®šä¹‰è¡Œä¸ºæˆ–é€šè¿‡åŠ å…¥å…¶ä»– Observable.</p>
<p>åˆ›å»ºè¿ç®—ç¬¦çš„å…¸å‹ç¤ºä¾‹æ˜¯é—´éš”å‡½æ•°ã€‚å®ƒä»¥æ•°å­—ï¼ˆä¸æ˜¯ Observableï¼‰ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œå¹¶äº§ç”Ÿ Observable ä½œä¸ºè¾“å‡ºï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; interval &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable = interval(<span class="number">1000</span> <span class="comment">/* number of milliseconds */</span>);</span><br></pre></td></tr></table></figure>

<h4 id="æ“ä½œç¬¦åˆ†ç±»"><a href="#æ“ä½œç¬¦åˆ†ç±»" class="headerlink" title="æ“ä½œç¬¦åˆ†ç±»"></a>æ“ä½œç¬¦åˆ†ç±»</h4><p>æ“ä½œç¬¦æœ‰ç€ä¸åŒçš„ç”¨é€”ï¼Œå®ƒä»¬å¯ä½œå¦‚ä¸‹åˆ†ç±»ï¼šåˆ›å»ºã€è½¬æ¢ã€è¿‡æ»¤ã€ç»„åˆã€é”™è¯¯å¤„ç†ã€å·¥å…·ï¼Œç­‰ç­‰ã€‚åœ¨ä¸‹é¢çš„åˆ—è¡¨ä¸­ï¼Œä½ å¯ä»¥æŒ‰åˆ†ç±»ç»„ç»‡å¥½çš„æ‰€æœ‰æ“ä½œç¬¦ã€‚</p>
<h5 id="åˆ›å»ºæ“ä½œç¬¦"><a href="#åˆ›å»ºæ“ä½œç¬¦" class="headerlink" title="åˆ›å»ºæ“ä½œç¬¦"></a>åˆ›å»ºæ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/ajax/ajax"><code>ajax</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/bindCallback"><code>bindCallback</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/bindNodeCallback"><code>bindNodeCallback</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/defer"><code>defer</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/empty"><code>empty</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/from"><code>from</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/fromEvent"><code>fromEvent</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/fromEventPattern"><code>fromEventPattern</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/generate"><code>generate</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/interval"><code>interval</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/of"><code>of</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/range"><code>range</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/throwError"><code>throwError</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/timer"><code>timer</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/iif"><code>iif</code></a></li>
</ul>
<h5 id="è¿æ¥åˆ›å»ºæ“ä½œç¬¦"><a href="#è¿æ¥åˆ›å»ºæ“ä½œç¬¦" class="headerlink" title="è¿æ¥åˆ›å»ºæ“ä½œç¬¦"></a>è¿æ¥åˆ›å»ºæ“ä½œç¬¦</h5><p>è¿™äº›æ˜¯ Observable åˆ›å»ºè¿ç®—ç¬¦ï¼Œè¿˜å…·æœ‰è”æ¥åŠŸèƒ½-å‘å‡ºå¤šä¸ªæº Observable çš„å€¼ã€‚</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/combineLatest"><code>combineLatest</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/concat"><code>concat</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/forkJoin"><code>forkJoin</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/merge"><code>merge</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/partition"><code>partition</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/race"><code>race</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/index/function/zip"><code>zip</code></a></li>
</ul>
<h5 id="è½¬æ¢æ“ä½œç¬¦"><a href="#è½¬æ¢æ“ä½œç¬¦" class="headerlink" title="è½¬æ¢æ“ä½œç¬¦"></a>è½¬æ¢æ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/buffer"><code>buffer</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/bufferCount"><code>bufferCount</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/bufferTime"><code>bufferTime</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/bufferToggle"><code>bufferToggle</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/bufferWhen"><code>bufferWhen</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/concatMap"><code>concatMap</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/concatMapTo"><code>concatMapTo</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/exhaust"><code>exhaust</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/exhaustMap"><code>exhaustMap</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/expand"><code>expand</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/groupBy"><code>groupBy</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/map"><code>map</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/mapTo"><code>mapTo</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/mergeMap"><code>mergeMap</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/mergeMapTo"><code>mergeMapTo</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/mergeScan"><code>mergeScan</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/pairwise"><code>pairwise</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/partition"><code>partition</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/pluck"><code>pluck</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/scan"><code>scan</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/switchMap"><code>switchMap</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/switchMapTo"><code>switchMapTo</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/window"><code>window</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/windowCount"><code>windowCount</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/windowTime"><code>windowTime</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/windowToggle"><code>windowToggle</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/windowWhen"><code>windowWhen</code></a></li>
</ul>
<h5 id="è¿‡æ»¤æ“ä½œç¬¦"><a href="#è¿‡æ»¤æ“ä½œç¬¦" class="headerlink" title="è¿‡æ»¤æ“ä½œç¬¦"></a>è¿‡æ»¤æ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/audit"><code>audit</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/auditTime"><code>auditTime</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/debounce"><code>debounce</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/debounceTime"><code>debounceTime</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/distinct"><code>distinct</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/class/es6/Observable.js~Observable.html#instance-method-distinctKey"><code>distinctKey</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/distinctUntilChanged"><code>distinctUntilChanged</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/distinctUntilKeyChanged"><code>distinctUntilKeyChanged</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/elementAt"><code>elementAt</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/filter"><code>filter</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/first"><code>first</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/ignoreElements"><code>ignoreElements</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/last"><code>last</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/sample"><code>sample</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/sampleTime"><code>sampleTime</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/single"><code>single</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/skip"><code>skip</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/skipLast"><code>skipLast</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/skipUntil"><code>skipUntil</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/skipWhile"><code>skipWhile</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/take"><code>take</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/takeLast"><code>takeLast</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/takeUntil"><code>takeUntil</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/takeWhile"><code>takeWhile</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/throttle"><code>throttle</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/throttleTime"><code>throttleTime</code></a></li>
</ul>
<h5 id="è¿æ¥æ“ä½œç¬¦"><a href="#è¿æ¥æ“ä½œç¬¦" class="headerlink" title="è¿æ¥æ“ä½œç¬¦"></a>è¿æ¥æ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/combineAll"><code>combineAll</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/concatAll"><code>concatAll</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/exhaust"><code>exhaust</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/mergeAll"><code>mergeAll</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/startWith"><code>startWith</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/withLatestFrom"><code>withLatestFrom</code></a></li>
</ul>
<h5 id="å¤šå¹¿æ’­æ“ä½œç¬¦"><a href="#å¤šå¹¿æ’­æ“ä½œç¬¦" class="headerlink" title="å¤šå¹¿æ’­æ“ä½œç¬¦"></a>å¤šå¹¿æ’­æ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/multicast"><code>multicast</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/publish"><code>publish</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/publishBehavior"><code>publishBehavior</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/publishLast"><code>publishLast</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/publishReplay"><code>publishReplay</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/share"><code>share</code></a></li>
</ul>
<h5 id="é”™è¯¯æ•è·æ“ä½œç¬¦"><a href="#é”™è¯¯æ•è·æ“ä½œç¬¦" class="headerlink" title="é”™è¯¯æ•è·æ“ä½œç¬¦"></a>é”™è¯¯æ•è·æ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/catchError"><code>catchError</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/retry"><code>retry</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/retryWhen"><code>retryWhen</code></a></li>
</ul>
<h5 id="å·¥å…·æ“ä½œç¬¦"><a href="#å·¥å…·æ“ä½œç¬¦" class="headerlink" title="å·¥å…·æ“ä½œç¬¦"></a>å·¥å…·æ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/tap"><code>tap</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/delay"><code>delay</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/delayWhen"><code>delayWhen</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/dematerialize"><code>dematerialize</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/materialize"><code>materialize</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/observeOn"><code>observeOn</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/subscribeOn"><code>subscribeOn</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/timeInterval"><code>timeInterval</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/timestamp"><code>timestamp</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/timeout"><code>timeout</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/timeoutWith"><code>timeoutWith</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/toArray"><code>toArray</code></a></li>
</ul>
<h5 id="æ¡ä»¶å’Œå¸ƒå°”æ“ä½œç¬¦"><a href="#æ¡ä»¶å’Œå¸ƒå°”æ“ä½œç¬¦" class="headerlink" title="æ¡ä»¶å’Œå¸ƒå°”æ“ä½œç¬¦"></a>æ¡ä»¶å’Œå¸ƒå°”æ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/defaultIfEmpty"><code>defaultIfEmpty</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/every"><code>every</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/find"><code>find</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/findIndex"><code>findIndex</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/isEmpty"><code>isEmpty</code></a></li>
</ul>
<h5 id="æ•°å­¦å’Œèšåˆæ“ä½œç¬¦"><a href="#æ•°å­¦å’Œèšåˆæ“ä½œç¬¦" class="headerlink" title="æ•°å­¦å’Œèšåˆæ“ä½œç¬¦"></a>æ•°å­¦å’Œèšåˆæ“ä½œç¬¦</h5><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/count"><code>count</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/max"><code>max</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/min"><code>min</code></a></li>
<li><a target="_blank" rel="noopener" href="https://rxjs.dev/api/operators/reduce"><code>reduce</code></a></li>
</ul>
<h4 id="ä¾‹å­-ğŸŒ°"><a href="#ä¾‹å­-ğŸŒ°" class="headerlink" title="ä¾‹å­ ğŸŒ°"></a>ä¾‹å­ ğŸŒ°</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>RxJS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>click count: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;button-plus&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;button-minus&quot;</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/rxjs/6.6.3/rxjs.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> &#123; fromEvent, operators &#125; = <span class="built_in">window</span>.rxjs;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> &#123; mapTo, scan, merge &#125; = <span class="built_in">window</span>.rxjs.operators;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;operators:&#x27;</span>, operators);</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;window.rxjs:&#x27;</span>, <span class="built_in">window</span>.rxjs);</span></span><br><span class="line"><span class="javascript">      fromEvent(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;button-plus&#x27;</span>), <span class="string">&#x27;click&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        .pipe(</span></span><br><span class="line"><span class="javascript">          mapTo(<span class="number">1</span>),</span></span><br><span class="line"><span class="javascript">          merge(</span></span><br><span class="line"><span class="javascript">            fromEvent(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;button-minus&#x27;</span>), <span class="string">&#x27;click&#x27;</span>).pipe(</span></span><br><span class="line"><span class="javascript">              mapTo(-<span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">            )</span></span><br><span class="line"><span class="javascript">          ),</span></span><br><span class="line"><span class="javascript">          scan(<span class="function">(<span class="params">total, now</span>) =&gt;</span> total + now)</span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">        .subscribe(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">document</span>.getElementById(<span class="string">&#x27;count&#x27;</span>).innerText = value;</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Subscription"><a href="#Subscription" class="headerlink" title="Subscription"></a><a target="_blank" rel="noopener" href="https://rxjs.dev/guide/subscription">Subscription</a></h3><p><code>Subscription</code> - æ˜¯ä»£è¡¨ä¸€æ¬¡æ€§èµ„æºçš„å¯¹è±¡ï¼Œé€šå¸¸æ˜¯<code>Observable</code>çš„æ‰§è¡Œã€‚<code>Subscription</code>æ‹¥æœ‰ä¸€ç§é‡è¦çš„æ–¹æ³•<code>unsubscribe()</code>ï¼Œå³å–æ¶ˆè®¢é˜…ï¼Œè¯¥æ–¹æ³•ä¸å¸¦ä»»ä½•å‚æ•°ï¼Œè€Œåªæ˜¯å¤„ç½®è¯¥è®¢é˜…æ‰€æ‹¥æœ‰çš„èµ„æºã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; interval &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable = interval(<span class="number">1000</span>);</span><br><span class="line"><span class="keyword">const</span> subscription = observable.subscribe(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="built_in">console</span>.log(x));</span><br><span class="line"><span class="comment">// Later:</span></span><br><span class="line"><span class="comment">// This cancels the ongoing Observable execution which</span></span><br><span class="line"><span class="comment">// was started by calling subscribe with an Observer.</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subscription.unsubscribe();</span><br><span class="line">&#125;, <span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** è¾“å‡º</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>Subscription è¿˜å¯ä»¥åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·ä¸€ä¸ª Subscription è°ƒç”¨ <code>unsubscribe()</code> æ–¹æ³•ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ª Subscription å–æ¶ˆè®¢é˜… ã€‚ä½ å¯ä»¥é€šè¿‡æŠŠä¸€ä¸ª Subscription æ·»åŠ åˆ°å¦ä¸€ä¸ªä¸Šé¢æ¥åšè¿™ä»¶äº‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; interval &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable1 = interval(<span class="number">200</span>);</span><br><span class="line"><span class="keyword">const</span> observable2 = interval(<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> subscription = observable1.subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`observable1 <span class="subst">$&#123;v&#125;</span>`</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> childSubscription = observable2.subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`observable2 <span class="subst">$&#123;v&#125;</span>`</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">subscription.add(childSubscription);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subscription.unsubscribe();</span><br><span class="line">&#125;, <span class="number">1500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** è¾“å‡º</span></span><br><span class="line"><span class="comment">observable1 0</span></span><br><span class="line"><span class="comment">observable2 0</span></span><br><span class="line"><span class="comment">observable1 1</span></span><br><span class="line"><span class="comment">observable1 2</span></span><br><span class="line"><span class="comment">observable2 1</span></span><br><span class="line"><span class="comment">observable1 3</span></span><br><span class="line"><span class="comment">observable2 2</span></span><br><span class="line"><span class="comment">observable1 4</span></span><br><span class="line"><span class="comment">observable2 3</span></span><br><span class="line"><span class="comment">observable1 5</span></span><br><span class="line"><span class="comment">observable1 6</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="Subject"><a href="#Subject" class="headerlink" title="Subject"></a><a target="_blank" rel="noopener" href="https://rxjs.dev/guide/subject">Subject</a></h3><p><code>Subject</code> æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„<code>Observable</code>,å®ƒå…è®¸å°†å€¼å¤šæ’­ç»™å¤šä¸ªè§‚å¯Ÿè€…ï¼Œæ‰€ä»¥ <code>Subject</code> æ˜¯å¤šæ’­çš„ï¼Œè€Œæ™®é€šçš„ <code>Observables</code> æ˜¯å•æ’­çš„(æ¯ä¸ªå·²è®¢é˜…çš„è§‚å¯Ÿè€…éƒ½æ‹¥æœ‰ <code>Observable</code> çš„ç‹¬ç«‹æ‰§è¡Œ)ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Subject &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºsubject</span></span><br><span class="line"><span class="keyword">const</span> subject = <span class="keyword">new</span> Subject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…ä¸€ä¸ªobserver</span></span><br><span class="line">subject.subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;stream 1&#x27;</span>, v));</span><br><span class="line"><span class="comment">// å†è®¢é˜…ä¸€ä¸ªobserver</span></span><br><span class="line">subject.subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;stream 2&#x27;</span>, v));</span><br><span class="line"><span class="comment">// å»¶æ—¶1så†è®¢é˜…ä¸€ä¸ªobserver</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subject.subscribe(<span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;stream 3&#x27;</span>, v));</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="comment">// äº§ç”Ÿæ•°æ®1</span></span><br><span class="line">subject.next(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// äº§ç”Ÿæ•°æ®2</span></span><br><span class="line">subject.next(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// å»¶æ—¶3säº§ç”Ÿæ•°æ®3</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subject.next(<span class="number">3</span>);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">stream 1 1</span></span><br><span class="line"><span class="comment">stream 2 1</span></span><br><span class="line"><span class="comment">stream 1 2</span></span><br><span class="line"><span class="comment">stream 2 2</span></span><br><span class="line"><span class="comment">stream 1 3</span></span><br><span class="line"><span class="comment">stream 2 3</span></span><br><span class="line"><span class="comment">stream 3 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="å•æ’­å’Œå¤šæ’­"><a href="#å•æ’­å’Œå¤šæ’­" class="headerlink" title="å•æ’­å’Œå¤šæ’­"></a><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/765d572b26f0">å•æ’­å’Œå¤šæ’­</a></h4><p><strong>å•æ’­ï¼š</strong> æ¯ä¸ªæ™®é€šçš„ Observables å®ä¾‹éƒ½åªèƒ½è¢«ä¸€ä¸ªè§‚å¯Ÿè€…è®¢é˜…ï¼Œå½“å®ƒè¢«å…¶ä»–è§‚å¯Ÿè€…è®¢é˜…çš„æ—¶å€™ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä¹Ÿå°±æ˜¯æ™®é€š Observables è¢«ä¸åŒçš„è§‚å¯Ÿè€…è®¢é˜…çš„æ—¶å€™ï¼Œä¼šæœ‰å¤šä¸ªå®ä¾‹ï¼Œä¸ç®¡è§‚å¯Ÿè€…æ˜¯ä»ä½•æ—¶å¼€å§‹è®¢é˜…ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æ˜¯ä»å¤´å¼€å§‹æŠŠå€¼å‘ç»™å¯¹åº”çš„è§‚å¯Ÿè€…</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Observableæ˜¯å•æ’­ï¼Œæ¯ä¸€ä¸ªè®¢é˜…æ˜¯ç‹¬ç«‹</span></span><br><span class="line"><span class="keyword">const</span> observable = <span class="keyword">new</span> Observable(<span class="function">(<span class="params">observer</span>) =&gt;</span> &#123;</span><br><span class="line">  observer.next(<span class="built_in">Math</span>.random());</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> observer.next(<span class="built_in">Math</span>.random()), <span class="number">300</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">observable.subscribe(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`è®¢é˜…1: <span class="subst">$&#123;val&#125;</span>`</span>));</span><br><span class="line"></span><br><span class="line">observable.subscribe(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`è®¢é˜…2: <span class="subst">$&#123;val&#125;</span>`</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> observable.subscribe(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`è®¢é˜…3:<span class="subst">$&#123;val&#125;</span>`</span>)),</span><br><span class="line">  <span class="number">500</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è®¢é˜…1: 0.6689612996581182</span></span><br><span class="line"><span class="comment">è®¢é˜…2: 0.28043048188854236</span></span><br><span class="line"><span class="comment">è®¢é˜…1: 0.1297750238807054</span></span><br><span class="line"><span class="comment">è®¢é˜…2: 0.17389658580744594</span></span><br><span class="line"><span class="comment">è®¢é˜…3:0.6927734300935287</span></span><br><span class="line"><span class="comment">è®¢é˜…3:0.39659821631152314</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p><strong>å¤šæ’­ï¼š</strong> <code>Subject</code>æ˜¯å¤šæ’­ï¼Œåˆ™å¤šä¸ªè®¢é˜…éƒ½æ˜¯ä¸€ä¸ªå®ä¾‹ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Subject &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> subject = <span class="keyword">new</span> Subject();</span><br><span class="line"></span><br><span class="line">subject.subscribe(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`è®¢é˜…1: <span class="subst">$&#123;val&#125;</span>`</span>));</span><br><span class="line">subject.subscribe(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`è®¢é˜…2: <span class="subst">$&#123;val&#125;</span>`</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subject.subscribe(<span class="function">(<span class="params">val</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`è®¢é˜…3: <span class="subst">$&#123;val&#125;</span>`</span>));</span><br><span class="line">&#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="built_in">Math</span>.random());</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subject.next(<span class="built_in">Math</span>.random());</span><br><span class="line">&#125;, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è®¢é˜…1: 0.05834565385958235</span></span><br><span class="line"><span class="comment">è®¢é˜…2: 0.05834565385958235</span></span><br><span class="line"><span class="comment">è®¢é˜…1: 0.7996036293548809</span></span><br><span class="line"><span class="comment">è®¢é˜…2: 0.7996036293548809</span></span><br><span class="line"><span class="comment">è®¢é˜…3: 0.7996036293548809</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p><strong>æ¯ä¸ª Subject éƒ½æ˜¯ Observable ã€‚</strong> - å¯¹äº Subjectï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªè§‚å¯Ÿè€…å¹¶ä½¿ç”¨ <code>subscribe</code> æ–¹æ³•ï¼Œå°±å¯ä»¥å¼€å§‹æ­£å¸¸æ¥æ”¶å€¼ã€‚ä»è§‚å¯Ÿè€…çš„è§’åº¦è€Œè¨€ï¼Œå®ƒæ— æ³•åˆ¤æ–­ Observable æ‰§è¡Œæ˜¯æ¥è‡ªæ™®é€šçš„ Observable è¿˜æ˜¯ Subject ã€‚</p>
<p>åœ¨ Subject çš„å†…éƒ¨ï¼Œ<code>subscribe</code> ä¸ä¼šè°ƒç”¨å‘é€å€¼çš„æ–°æ‰§è¡Œã€‚å®ƒåªæ˜¯å°†ç»™å®šçš„è§‚å¯Ÿè€…æ³¨å†Œåˆ°è§‚å¯Ÿè€…åˆ—è¡¨ä¸­ï¼Œç±»ä¼¼äºå…¶ä»–åº“æˆ–è¯­è¨€ä¸­çš„ <code>addListener</code> çš„å·¥ä½œæ–¹å¼ã€‚</p>
<p><strong>æ¯ä¸ª Subject éƒ½æ˜¯ Observerã€‚</strong> - Subject æ˜¯ä¸€ä¸ªæœ‰å¦‚ä¸‹æ–¹æ³•çš„å¯¹è±¡ï¼š <code>next(v)</code>ã€<code>error(e)</code> å’Œ <code>complete()</code> ã€‚è¦ç»™ Subject æä¾›æ–°å€¼ï¼Œåªè¦è°ƒç”¨ <code>next(theValue)</code>ï¼Œå®ƒä¼šå°†å€¼å¤šæ’­ç»™å·²æ³¨å†Œç›‘å¬è¯¥ Subject çš„è§‚å¯Ÿè€…ä»¬ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> subject = <span class="keyword">new</span> Rx.Subject();</span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;observerA: &#x27;</span> + v),</span><br><span class="line">&#125;);</span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;observerB: &#x27;</span> + v),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="number">1</span>);</span><br><span class="line">subject.next(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>å› ä¸º Subject æ˜¯è§‚å¯Ÿè€…ï¼Œè¿™ä¹Ÿå°±åœ¨æ„å‘³ç€ä½ å¯ä»¥æŠŠ Subject ä½œä¸ºå‚æ•°ä¼ ç»™ä»»ä½• Observable çš„ <code>subscribe</code> æ–¹æ³•ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€å±•ç¤ºçš„ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">from</span>, Subject &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Subject$ = <span class="keyword">new</span> Subject();</span><br><span class="line"></span><br><span class="line">Subject$.subscribe(&#123; <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;observerA: &#x27;</span> + v) &#125;);</span><br><span class="line">Subject$.subscribe(&#123; <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;observerB: &#x27;</span> + v) &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable = <span class="keyword">from</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line">observable.subscribe(Subject$);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**è¾“å‡º</span></span><br><span class="line"><span class="comment">observerA: 1</span></span><br><span class="line"><span class="comment">observerB: 1</span></span><br><span class="line"><span class="comment">observerA: 2</span></span><br><span class="line"><span class="comment">observerB: 2</span></span><br><span class="line"><span class="comment">observerA: 3</span></span><br><span class="line"><span class="comment">observerB: 3</span></span><br><span class="line"><span class="comment">observerA: 4</span></span><br><span class="line"><span class="comment">observerB: 4</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€äº›ç‰¹æ®Šç±»å‹çš„ <code>Subject</code>ï¼š<code>BehaviorSubject</code>ã€<code>ReplaySubject</code> å’Œ <code>AsyncSubject</code>ã€‚</p>
<h4 id="BehaviorSubject"><a href="#BehaviorSubject" class="headerlink" title="BehaviorSubject"></a>BehaviorSubject</h4><p>Subject çš„å…¶ä¸­ä¸€ä¸ªå˜ä½“å°±æ˜¯ <code>BehaviorSubject</code>ï¼Œå®ƒæœ‰ä¸€ä¸ªâ€œå½“å‰å€¼â€çš„æ¦‚å¿µã€‚å®ƒä¿å­˜äº†å‘é€ç»™æ¶ˆè´¹è€…çš„æœ€æ–°å€¼ã€‚å¹¶ä¸”å½“æœ‰æ–°çš„è§‚å¯Ÿè€…è®¢é˜…æ—¶ï¼Œä¼šç«‹å³ä» <code>BehaviorSubject</code> é‚£æ¥æ”¶åˆ°â€œå½“å‰å€¼â€ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BehaviorSubject &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> subject = <span class="keyword">new</span> BehaviorSubject(<span class="number">0</span>); <span class="comment">// 0 is the initial value</span></span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`observerA: <span class="subst">$&#123;v&#125;</span>`</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="number">1</span>);</span><br><span class="line">subject.next(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`observerB: <span class="subst">$&#123;v&#125;</span>`</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="number">3</span>);</span><br><span class="line"><span class="comment">/** è¾“å‡º</span></span><br><span class="line"><span class="comment">observerA: 0</span></span><br><span class="line"><span class="comment">observerA: 1</span></span><br><span class="line"><span class="comment">observerA: 2</span></span><br><span class="line"><span class="comment">observerB: 2</span></span><br><span class="line"><span class="comment">observerA: 3</span></span><br><span class="line"><span class="comment">observerB: 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="ReplaySubject"><a href="#ReplaySubject" class="headerlink" title="ReplaySubject"></a>ReplaySubject</h4><p><code>ReplaySubject</code> ç±»ä¼¼äº <code>BehaviorSubject</code>ï¼Œå®ƒå¯ä»¥å‘é€æ—§å€¼ç»™æ–°çš„è®¢é˜…è€…ï¼Œä½†å®ƒè¿˜å¯ä»¥<em>è®°å½•</em> Observable æ‰§è¡Œçš„ä¸€éƒ¨åˆ†ã€‚</p>
<blockquote>
<p><code>ReplaySubject</code> è®°å½• Observable æ‰§è¡Œä¸­çš„å¤šä¸ªå€¼å¹¶å°†å…¶å›æ”¾ç»™æ–°çš„è®¢é˜…è€…ã€‚</p>
</blockquote>
<p>å½“åˆ›å»º <code>ReplaySubject</code> æ—¶ï¼Œä½ å¯ä»¥æŒ‡å®šå›æ”¾å¤šå°‘ä¸ªå€¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ReplaySubject &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> subject = <span class="keyword">new</span> ReplaySubject(<span class="number">3</span>); <span class="comment">// buffer 3 values for new subscribers</span></span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`observerA: <span class="subst">$&#123;v&#125;</span>`</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="number">1</span>);</span><br><span class="line">subject.next(<span class="number">2</span>);</span><br><span class="line">subject.next(<span class="number">3</span>);</span><br><span class="line">subject.next(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`observerB: <span class="subst">$&#123;v&#125;</span>`</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Logs:</span></span><br><span class="line"><span class="comment">// observerA: 1</span></span><br><span class="line"><span class="comment">// observerA: 2</span></span><br><span class="line"><span class="comment">// observerA: 3</span></span><br><span class="line"><span class="comment">// observerA: 4</span></span><br><span class="line"><span class="comment">// observerB: 2</span></span><br><span class="line"><span class="comment">// observerB: 3</span></span><br><span class="line"><span class="comment">// observerB: 4</span></span><br><span class="line"><span class="comment">// observerA: 5</span></span><br><span class="line"><span class="comment">// observerB: 5</span></span><br></pre></td></tr></table></figure>

<p>é™¤äº†ç¼“å†²æ•°é‡ï¼Œä½ è¿˜å¯ä»¥æŒ‡å®š <em>window time</em> (ä»¥æ¯«ç§’ä¸ºå•ä½)æ¥ç¡®å®šå¤šä¹…ä¹‹å‰çš„å€¼å¯ä»¥è®°å½•ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è¾ƒå¤§çš„ç¼“å­˜æ•°é‡<code>100</code>ï¼Œä½† window time å‚æ•°åªè®¾ç½®äº†<code>500</code>æ¯«ç§’ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ReplaySubject &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> subject = <span class="keyword">new</span> ReplaySubject(<span class="number">100</span>, <span class="number">500</span> <span class="comment">/* windowTime */</span>);</span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`observerA: <span class="subst">$&#123;v&#125;</span>`</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> subject.next(i++), <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  subject.subscribe(&#123;</span><br><span class="line">    <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`observerB: <span class="subst">$&#123;v&#125;</span>`</span>),</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Logs</span></span><br><span class="line"><span class="comment">// observerA: 1</span></span><br><span class="line"><span class="comment">// observerA: 2</span></span><br><span class="line"><span class="comment">// observerA: 3</span></span><br><span class="line"><span class="comment">// observerA: 4</span></span><br><span class="line"><span class="comment">// observerA: 5</span></span><br><span class="line"><span class="comment">// observerB: 3</span></span><br><span class="line"><span class="comment">// observerB: 4</span></span><br><span class="line"><span class="comment">// observerB: 5</span></span><br><span class="line"><span class="comment">// observerA: 6</span></span><br><span class="line"><span class="comment">// observerB: 6</span></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<h4 id="AsyncSubject"><a href="#AsyncSubject" class="headerlink" title="AsyncSubject"></a>AsyncSubject</h4><p>AsyncSubject æ˜¯å¦ä¸€ä¸ª Subject å˜ä½“ï¼Œåªæœ‰å½“ Observable æ‰§è¡Œå®Œæˆæ—¶(æ‰§è¡Œ <code>complete()</code>)ï¼Œå®ƒæ‰ä¼šå°†æ‰§è¡Œçš„æœ€åä¸€ä¸ªå€¼å‘é€ç»™è§‚å¯Ÿè€…ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; AsyncSubject &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> subject = <span class="keyword">new</span> AsyncSubject();</span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`observerA: <span class="subst">$&#123;v&#125;</span>`</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="number">1</span>);</span><br><span class="line">subject.next(<span class="number">2</span>);</span><br><span class="line">subject.next(<span class="number">3</span>);</span><br><span class="line">subject.next(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  <span class="attr">next</span>: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`observerB: <span class="subst">$&#123;v&#125;</span>`</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="number">5</span>);</span><br><span class="line">subject.complete();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Logs:</span></span><br><span class="line"><span class="comment">// observerA: 5</span></span><br><span class="line"><span class="comment">// observerB: 5</span></span><br></pre></td></tr></table></figure>

<p>AsyncSubject å’Œ <a target="_blank" rel="noopener" href="https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-last"><code>last()</code></a> æ“ä½œç¬¦ç±»ä¼¼ï¼Œå› ä¸ºå®ƒä¹Ÿæ˜¯ç­‰å¾… <code>complete</code> é€šçŸ¥ï¼Œä»¥å‘é€ä¸€ä¸ªå•ä¸ªå€¼ã€‚</p>
<h3 id="Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰"><a href="#Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰" class="headerlink" title="Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰"></a><a target="_blank" rel="noopener" href="https://rxjs.dev/guide/scheduler">Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰</a></h3><p><code>Scheduler</code> æ§åˆ¶ç€ä½•æ—¶å¯åŠ¨<code>subscription</code>å’Œä½•æ—¶å‘é€é€šçŸ¥ã€‚å®ƒç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li><strong>è°ƒåº¦å™¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„</strong>ã€‚å®ƒçŸ¥é“å¦‚ä½•æ ¹æ®ä¼˜å…ˆçº§æˆ–å…¶ä»–æ ‡å‡†æ¥å­˜å‚¨ä»»åŠ¡å’Œå°†ä»»åŠ¡è¿›è¡Œæ’åºã€‚</li>
<li><strong>è°ƒåº¦å™¨æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ã€‚ å®ƒè¡¨ç¤ºåœ¨ä½•æ—¶ä½•åœ°æ‰§è¡Œä»»åŠ¡(ä¸¾ä¾‹æ¥è¯´ï¼Œç«‹å³çš„ï¼Œæˆ–å¦ä¸€ç§å›è°ƒå‡½æ•°æœºåˆ¶(æ¯”å¦‚ setTimeout æˆ– process.nextTick)ï¼Œæˆ–åŠ¨ç”»å¸§)ã€‚</li>
<li><strong>è°ƒåº¦å™¨æœ‰ä¸€ä¸ªï¼ˆè™šæ‹Ÿçš„ï¼‰æ—¶é’Ÿã€‚</strong> è°ƒåº¦å™¨åŠŸèƒ½é€šè¿‡å®ƒçš„ getter æ–¹æ³• now() æä¾›äº†â€æ—¶é—´â€çš„æ¦‚å¿µã€‚åœ¨å…·ä½“è°ƒåº¦å™¨ä¸Šå®‰æ’çš„ä»»åŠ¡å°†ä¸¥æ ¼éµå¾ªè¯¥æ—¶é’Ÿæ‰€è¡¨ç¤ºçš„æ—¶é—´ã€‚</li>
</ul>
<blockquote>
<p>è°ƒåº¦å™¨å¯ä»¥è®©ä½ è§„å®š Observable åœ¨ä»€ä¹ˆæ ·çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å‘é€é€šçŸ¥ç»™å®ƒçš„è§‚å¯Ÿè€…ã€‚</p>
</blockquote>
<p>åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­æˆ‘ä»¬æ˜¯ç”¨<code>Obervable</code>åŒæ­¥çš„è¾“å‡ºå€¼ã€‚ä¸‹é¢é€šè¿‡<code>observeOn</code>æŒ‡çš„<code>async</code> è°ƒåº¦å™¨å»ä¼ é€’è¿™äº›å€¼ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable, asyncScheduler &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; observeOn &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs/operators&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable = <span class="keyword">new</span> Observable(<span class="function">(<span class="params">observer</span>) =&gt;</span> &#123;</span><br><span class="line">  observer.next(<span class="number">1</span>);</span><br><span class="line">  observer.next(<span class="number">2</span>);</span><br><span class="line">  observer.next(<span class="number">3</span>);</span><br><span class="line">  observer.complete();</span><br><span class="line">&#125;).pipe(</span><br><span class="line">  observeOn(asyncScheduler) <span class="comment">//å¦‚æœæ²¡æœ‰è¿™ä¸ªï¼Œåˆ™ just after subscribe æœ€åè¾“å‡º</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;just before subscribe&#x27;</span>);</span><br><span class="line">observable.subscribe(&#123;</span><br><span class="line">  <span class="function"><span class="title">next</span>(<span class="params">x</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;got value &#x27;</span> + x);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">error</span>(<span class="params">err</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;something wrong occurred: &#x27;</span> + err);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">complete</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;done&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;just after subscribe&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** è¾“å‡º</span></span><br><span class="line"><span class="comment">just before subscribe</span></span><br><span class="line"><span class="comment">just after subscribe</span></span><br><span class="line"><span class="comment">got value 1</span></span><br><span class="line"><span class="comment">got value 2</span></span><br><span class="line"><span class="comment">got value 3</span></span><br><span class="line"><span class="comment">done</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="Schedulers-è°ƒåº¦å™¨-ç±»å‹"><a href="#Schedulers-è°ƒåº¦å™¨-ç±»å‹" class="headerlink" title="Schedulers(è°ƒåº¦å™¨) ç±»å‹"></a>Schedulers(è°ƒåº¦å™¨) ç±»å‹</h4><p><code>async</code>è°ƒåº¦å™¨æ˜¯ RxJS æä¾›çš„å†…éƒ¨è°ƒåº¦å™¨ä¹‹ä¸€ã€‚</p>
<table>
<thead>
<tr>
<th align="left">è°ƒåº¦å™¨</th>
<th align="left">ç›®çš„</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>null</code></td>
<td align="left">ä¸ä¼ é€’ä»»ä½•è°ƒåº¦å™¨çš„è¯ï¼Œä¼šä»¥åŒæ­¥é€’å½’çš„æ–¹å¼å‘é€é€šçŸ¥ã€‚ç”¨äºå®šæ—¶æ“ä½œæˆ–å°¾é€’å½’æ“ä½œã€‚</td>
</tr>
<tr>
<td align="left"><code>queueScheduler</code></td>
<td align="left">å½“å‰äº‹ä»¶å¸§ä¸­çš„é˜Ÿåˆ—è°ƒåº¦(è¹¦åºŠè°ƒåº¦å™¨)ã€‚ç”¨äºè¿­ä»£æ“ä½œã€‚</td>
</tr>
<tr>
<td align="left"><code>asapScheduler</code></td>
<td align="left">Schedules æ˜¯åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸Š, å®ƒå°±åƒè¿è¡Œåœ¨ promises é˜Ÿåˆ—ä¸Š.åœ¨å½“å‰æ‰§è¡Œä»»åŠ¡ä¹‹åå†ä¸‹ä¸€ä¸ªä»»åŠ¡ä¹‹å‰æ‰§è¡Œã€‚å®ƒå°±åƒä¸€ä¸ªå¼‚æ­¥æ‰§è¡Œã€‚</td>
</tr>
<tr>
<td align="left"><code>asyncScheduler</code></td>
<td align="left">Schedules ä¸ <code>setInterval</code> ä¸€èµ·ä½¿ç”¨.åŸºç¡€çš„è°ƒåº¦å™¨</td>
</tr>
<tr>
<td align="left"><code>animationFrameScheduler</code></td>
<td align="left">Schedules ä¼šåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡æ¸²æŸ“ä¹‹å‰æ‰§è¡Œ. å®ƒå¯ä»¥ç”¨æ¥ç»˜åˆ¶æµç¨‹çš„åŠ¨ç”»ã€‚</td>
</tr>
</tbody></table>
<h4 id="ä½¿ç”¨-Schedulers-è°ƒåº¦å™¨"><a href="#ä½¿ç”¨-Schedulers-è°ƒåº¦å™¨" class="headerlink" title="ä½¿ç”¨ Schedulers(è°ƒåº¦å™¨)"></a>ä½¿ç”¨ Schedulers(è°ƒåº¦å™¨)</h4><p>ä½ å¯èƒ½åœ¨ä½ çš„ RxJS ä»£ç ä¸­å·²ç»ä½¿ç”¨è¿‡è°ƒåº¦å™¨äº†ï¼Œåªæ˜¯æ²¡æœ‰æ˜ç¡®åœ°æŒ‡æ˜è¦ä½¿ç”¨çš„è°ƒåº¦å™¨çš„ç±»å‹ã€‚è¿™æ˜¯å› ä¸ºæ‰€æœ‰çš„ Observable æ“ä½œç¬¦å¤„ç†å¹¶å‘æ€§éƒ½æœ‰å¯é€‰çš„è°ƒåº¦å™¨ã€‚å¦‚æœæ²¡æœ‰æä¾›è°ƒåº¦å™¨çš„è¯ï¼ŒRxJS ä¼šé€šè¿‡ä½¿ç”¨æœ€å°å¹¶å‘åŸåˆ™é€‰æ‹©ä¸€ä¸ªé»˜è®¤è°ƒåº¦å™¨ã€‚è¿™æ„å‘³ç€å¼•å…¥æ»¡è¶³æ“ä½œç¬¦éœ€è¦çš„æœ€å°å¹¶å‘é‡çš„è°ƒåº¦å™¨ä¼šè¢«é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œå¯¹äºè¿”å›æœ‰é™å’Œå°‘é‡æ¶ˆæ¯çš„ observable çš„æ“ä½œç¬¦ï¼ŒRxJS ä¸ä½¿ç”¨è°ƒåº¦å™¨ï¼Œå³ <code>null</code> æˆ– <code>undefined</code> ã€‚å¯¹äºè¿”å›æ½œåœ¨å¤§é‡çš„æˆ–æ— é™æ•°é‡çš„æ¶ˆæ¯çš„æ“ä½œç¬¦ï¼Œä½¿ç”¨ <code>queueScheduler</code> è°ƒåº¦å™¨ã€‚å¯¹äºä½¿ç”¨å®šæ—¶å™¨çš„æ“ä½œç¬¦ï¼Œä½¿ç”¨ <code>asyncScheduler</code> è°ƒåº¦å™¨ã€‚</p>
<p><strong>é™æ€åˆ›å»ºæ“ä½œç¬¦é€šå¸¸å¯ä»¥æ¥æ”¶è°ƒåº¦å™¨ä½œä¸ºå‚æ•°ã€‚</strong> ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>from(array, scheduler)</code> å¯ä»¥è®©ä½ æŒ‡å®šè°ƒåº¦å™¨ï¼Œå½“å‘é€ä» <code>array</code> è½¬æ¢çš„æ¯ä¸ªé€šçŸ¥çš„æ—¶å€™ä½¿ç”¨ã€‚è°ƒåº¦å™¨é€šå¸¸ä½œä¸ºæ“ä½œç¬¦çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚é™æ€åˆ›å»ºæ“ä½œç¬¦æ¥æ”¶è°ƒåº¦å™¨å‚æ•°ï¼š</p>
<ul>
<li><code>bindCallback</code></li>
<li><code>bindNodeCallback</code></li>
<li><code>combineLatest</code></li>
<li><code>concat</code></li>
<li><code>empty</code></li>
<li><code>from</code></li>
<li><code>fromPromise</code></li>
<li><code>interval</code></li>
<li><code>merge</code></li>
<li><code>of</code></li>
<li><code>range</code></li>
<li><code>throw</code></li>
<li><code>timer</code></li>
</ul>
<p><strong>ä½¿ç”¨ <code>subscribeOn</code> æ¥è°ƒåº¦ <code>subscribe()</code> è°ƒç”¨åœ¨ä»€ä¹ˆæ ·çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œã€‚</strong> é»˜è®¤æƒ…å†µä¸‹ï¼ŒObservable çš„ <code>subscribe()</code> è°ƒç”¨ä¼šç«‹å³åŒæ­¥åœ°æ‰§è¡Œã€‚ç„¶è€Œï¼Œä½ å¯èƒ½ä¼šå»¶è¿Ÿæˆ–å®‰æ’åœ¨ç»™å®šçš„è°ƒåº¦å™¨ä¸Šæ‰§è¡Œå®é™…çš„ subscription ï¼Œä½¿ç”¨å®ä¾‹æ“ä½œç¬¦ <code>subscribeOn(scheduler)</code>ï¼Œå…¶ä¸­ <code>scheduler</code> æ˜¯ä½ æä¾›çš„å‚æ•°ã€‚</p>
<p><strong>ä½¿ç”¨ <code>observeOn</code> æ¥è°ƒåº¦å‘é€é€šçŸ¥çš„çš„ä¸Šä¸‹æ–‡ã€‚</strong> æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­æ‰€çœ‹åˆ°çš„ï¼Œå®ä¾‹æ“ä½œç¬¦ <code>observeOn(scheduler)</code> åœ¨æº Observable å’Œç›®æ ‡è§‚å¯Ÿè€…ä¹‹é—´å¼•å…¥äº†ä¸€ä¸ªä¸­ä»‹è§‚å¯Ÿè€…ï¼Œä¸­ä»‹è´Ÿè´£è°ƒåº¦ï¼Œå®ƒä½¿ç”¨ç»™å®šçš„ <code>scheduler</code> æ¥è°ƒç”¨ç›®æ ‡è§‚å¯Ÿè€…ã€‚</p>
<p><code>bufferTime</code>ã€<code>debounceTime</code>ã€<code>delay</code>ã€<code>auditTime</code>ã€<code>sampleTime</code>ã€<code>throttleTime</code>ã€<code>timeInterval</code>ã€<code>timeout</code>ã€<code>timeoutWith</code>ã€<code>windowTime</code> è¿™æ ·æ—¶é—´ç›¸å…³çš„æ“ä½œç¬¦å…¨éƒ¨æ¥æ”¶è°ƒåº¦å™¨ä½œä¸ºæœ€åçš„å‚æ•°ï¼Œå¹¶ä¸”é»˜è®¤çš„æ“ä½œæ˜¯åœ¨ <code>asyncScheduler</code> è°ƒåº¦å™¨ä¸Šã€‚</p>
<p>å…¶ä»–æ¥æ”¶è°ƒåº¦å™¨ä½œä¸ºå‚æ•°çš„å®ä¾‹æ“ä½œç¬¦ï¼š<code>cache</code>ã€<code>combineLatest</code>ã€<code>concat</code>ã€<code>expand</code>ã€<code>merge</code>ã€<code>publishReplay</code>ã€<code>startWith</code>ã€‚</p>
<p>æ³¨æ„ï¼Œ<code>cache</code> å’Œ <code>publishReplay</code> éƒ½æ¥æ”¶è°ƒåº¦å™¨æ˜¯å› ä¸ºå®ƒä»¬ä½¿ç”¨äº† ReplaySubject ã€‚ReplaySubjects çš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯é€‰çš„è°ƒåº¦å™¨ä½œä¸ºæœ€åçš„å‚æ•°ï¼Œå› ä¸º ReplaySubject å¯èƒ½ä¼šå¤„ç†æ—¶é—´ï¼Œè¿™åªåœ¨è°ƒåº¦å™¨çš„ä¸Šä¸‹æ–‡ä¸­æ‰æœ‰æ„ä¹‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒReplaySubject ä½¿ç”¨ <code>queue</code> è°ƒåº¦å™¨æ¥æä¾›æ—¶é’Ÿã€‚</p>
<h2 id="RxJS-ä¸šåŠ¡ä¸Šçš„å®è·µ"><a href="#RxJS-ä¸šåŠ¡ä¸Šçš„å®è·µ" class="headerlink" title="RxJS ä¸šåŠ¡ä¸Šçš„å®è·µ"></a>RxJS ä¸šåŠ¡ä¸Šçš„å®è·µ</h2><h3 id="é¡µé¢å…ƒç´ æ‹–æ‹½"><a href="#é¡µé¢å…ƒç´ æ‹–æ‹½" class="headerlink" title="é¡µé¢å…ƒç´ æ‹–æ‹½"></a>é¡µé¢å…ƒç´ æ‹–æ‹½</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>RxJS å…ƒç´ æ‹–æ‹½<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-tag">html</span>,</span></span><br><span class="line"><span class="css">      <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: tomato;</span></span><br><span class="line"><span class="css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-id">#drag</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">cursor</span>: all-scroll;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;drag&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/rxjs/6.6.3/rxjs.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> &#123; fromEvent, operators &#125; = <span class="built_in">window</span>.rxjs;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> &#123; flatMap, map, takeUntil &#125; = operators;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> dragDOM = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;drag&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> body = <span class="built_in">document</span>.body;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> mouseDown = fromEvent(dragDOM, <span class="string">&#x27;mousedown&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> mouseUp = fromEvent(body, <span class="string">&#x27;mouseup&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> mouseMove = fromEvent(body, <span class="string">&#x27;mousemove&#x27;</span>);</span></span><br><span class="line"><span class="javascript">      mouseDown</span></span><br><span class="line"><span class="javascript">        .pipe(</span></span><br><span class="line"><span class="javascript">          flatMap(<span class="function">(<span class="params">event</span>) =&gt;</span> mouseMove.pipe(takeUntil(mouseUp))),</span></span><br><span class="line"><span class="javascript">          map(<span class="function">(<span class="params">event</span>) =&gt;</span> (&#123; <span class="attr">x</span>: event.clientX, <span class="attr">y</span>: event.clientY &#125;))</span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">        .subscribe(<span class="function">(<span class="params">pos</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          dragDOM.style.left = <span class="string">`<span class="subst">$&#123;pos.x&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">          dragDOM.style.top = <span class="string">`<span class="subst">$&#123;pos.y&#125;</span>px`</span>;</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Refer-To"><a href="#Refer-To" class="headerlink" title="Refer To"></a>Refer To</h2><p><a target="_blank" rel="noopener" href="https://rxjs.dev/guide/overview">https://rxjs.dev/guide/overview</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/274469124">https://zhuanlan.zhihu.com/p/274469124</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/270609123">https://zhuanlan.zhihu.com/p/270609123</a></p>
<p><a target="_blank" rel="noopener" href="https://cisy.me/rxjs/">https://cisy.me/rxjs/</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/34357403">https://zhuanlan.zhihu.com/p/34357403</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/star91/p/rxjs-ru-men.html">https://www.cnblogs.com/star91/p/rxjs-ru-men.html</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/146795979">https://zhuanlan.zhihu.com/p/146795979</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/34357403">https://zhuanlan.zhihu.com/p/34357403</a></p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>ä½œè€…: </span>
      <span>Fynn</span>
    </p>
    <p class="copyright-item">
      <span>æ¥æº: </span>
      <a href="https://fynn90.github.io">https://fynn90.github.io</a>
    </p>
    <p class="copyright-item">
      <span>é“¾æ¥: </span>
      <a href="https://fynn90.github.io/2021/03/03/RxJS/">https://fynn90.github.io/2021/03/03/RxJS/</a>
    </p>

    <p class="copyright-item lincese">
      
      æœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden />
    <label class="reward-button" for="reward">èµèµæ”¯æŒ</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/wechat.png" title="wechat">
          <div>wechat</div>
        </label>
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/alipay.png" title="alipay">
          <div>alipay</div>
        </label>
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/RxJS/">RxJS</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2021/04/04/Maven%E7%AE%80%E6%98%93%E6%95%99%E7%A8%8B/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Mavenç®€æ˜“æ•™ç¨‹</span>
        <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
      </a>
    
    
      <a class="next" href="/2021/02/18/InversifyJS/">
        <span class="next-text nav-default">InversifyJS</span>
        <span class="prev-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:fynn.90@outlook.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
        
          <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/%E5%B8%86-%E9%82%93-17163589/" class="iconfont icon-linkedin" title="linkedin"></a>
        
      
    
      
        
          <a target="_blank" rel="noopener" href="https://plus.google.com/u/0/117459332873536225443" class="iconfont icon-google" title="google"></a>
        
      
    
      
        
          <a target="_blank" rel="noopener" href="https://github.com/fatefan" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a target="_blank" rel="noopener" href="http://www.weibo.com/306019091" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
        
          <a target="_blank" rel="noopener" href="https://www.zhihu.com/people/FynnDeng/activities" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
      
    
    
    
  </div>


<div class="copyright">
  
  <span class="copyright-year">
    
    &copy; 
     
      2017 - 
    
    2021

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Fynn</span>
  </span>
  
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=1.1.2"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1.2"></script>

    
  </body>
</html>
